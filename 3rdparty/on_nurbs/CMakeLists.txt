project(${ON_NURBS_LIBRARY})
include("on_nurbs.cmake")
v4r_include_directories(${CMAKE_CURRENT_SOURCE_DIR} ${PCL_INCLUDE_DIRS} ${OPENNURBS_INCLUDE_DIRS})

add_library(${ON_NURBS_LIBRARY} STATIC ${ON_NURBS_SOURCES})
add_dependencies(${ON_NURBS_LIBRARY} ${OPENNURBS_LIBRARY})
target_link_libraries(${ON_NURBS_LIBRARY} ${PCL_LIBRARIES})

set_target_properties(${ON_NURBS_LIBRARY}
  PROPERTIES
    POSITION_INDEPENDENT_CODE TRUE
    OUTPUT_NAME "${ON_NURBS_LIBRARY}"
    ARCHIVE_OUTPUT_DIRECTORY ${3P_LIBRARY_OUTPUT_PATH}
)

install(FILES ${ON_NURBS_INCLUDES} DESTINATION "${V4R_3P_INCLUDE_INSTALL_PATH}/on_nurbs")

if(NOT BUILD_SHARED_LIBS)
  v4r_install_target(${ON_NURBS_LIBRARY} EXPORT V4RModules ARCHIVE DESTINATION ${V4R_3P_LIB_INSTALL_PATH} COMPONENT dev)
endif()
