project(${OPENNURBS_LIBRARY})
include("openNURBS.cmake")
v4r_include_directories(${CMAKE_CURRENT_SOURCE_DIR} ${PCL_INCLUDE_DIRS})

add_library(${OPENNURBS_LIBRARY} STATIC ${OPENNURBS_SOURCES})
target_link_libraries(${OPENNURBS_LIBRARY} ${PCL_LIBRARIES})

set_target_properties(${OPENNURBS_LIBRARY}
  PROPERTIES
    POSITION_INDEPENDENT_CODE TRUE
    OUTPUT_NAME "${OPENNURBS_LIBRARY}"
    ARCHIVE_OUTPUT_DIRECTORY ${3P_LIBRARY_OUTPUT_PATH}
)

install(FILES ${OPENNURBS_INCLUDES} DESTINATION "${V4R_3P_INCLUDE_INSTALL_PATH}/opennurbs")

if(NOT BUILD_SHARED_LIBS)
  v4r_install_target(${OPENNURBS_LIBRARY} EXPORT V4RModules ARCHIVE DESTINATION ${V4R_3P_LIB_INSTALL_PATH} COMPONENT dev)
endif()
